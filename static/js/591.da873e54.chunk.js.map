{"version":3,"file":"static/js/591.da873e54.chunk.js","mappings":"4NA+EA,EAvEmB,WACjB,OAAoCA,EAAAA,EAAAA,UAAS,IAA7C,eAAOC,EAAP,KAAmBC,EAAnB,KACA,GAA4CF,EAAAA,EAAAA,WAAS,GAArD,eAAOG,EAAP,KAAuBC,EAAvB,KACA,GAA4BJ,EAAAA,EAAAA,UAAS,GAArC,eAAOK,EAAP,KAAeC,EAAf,KACA,GAAsCN,EAAAA,EAAAA,WAAS,GAA/C,eAAOO,EAAP,KAAoBC,EAApB,KAEA,GAAyCC,EAAAA,EAAAA,KAAjCC,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOC,EAAxB,EAAwBA,cAExBC,EAAAA,EAAAA,YAAU,WACRC,EAAUT,GAAQ,KACjB,IAEH,IAAMS,EAAY,SAACT,EAAQU,GACfX,GAAVW,GACAH,EAAaP,GAAQW,KAAKC,IAGtBA,EAAqB,SAACC,GAC1B,IAAIC,GAAQ,EACRD,EAAcE,OAAS,IACzBD,GAAQ,GAGVjB,GAAc,SAACD,GAAD,wBAAoBA,IAApB,OAAmCiB,OACjDd,GAAkB,GAClBE,GAAU,SAACD,GAAD,OAAYA,EAAS,KAC/BG,GAAe,SAACD,GAAD,OAAiBY,MAsBlC,IAAME,EAnBN,SAAqBC,GACnB,IAAMD,EAAQC,EAAIC,KAAI,SAACC,EAAMC,GAC3B,OACE,eAAIC,SAAU,EAAGC,UAAU,eAA3B,UACE,UAAC,KAAD,CAAMC,GAAE,kBAAaJ,EAAKK,IAA1B,WACE,gBACEC,IAAKN,EAAKO,UACVC,IAAKR,EAAKS,MACVN,UAAU,sBAEZ,gBAAKA,UAAU,oBAAf,SAAoCH,EAAKS,YAPER,MAanD,OAAO,eAAIE,UAAU,eAAd,SAA8BN,IAGzBa,CAAYjC,GACpBkC,EAAexB,GAAQ,SAACyB,EAAA,EAAD,IAAmB,KAC1CC,EAAU3B,IAAYP,GAAiB,SAACmC,EAAA,EAAD,IAAc,KAE3D,OACE,0BACE,iBAAKX,UAAU,eAAf,UACGQ,EACAE,EACAhB,GACD,mBACEM,UAAU,mCACVY,SAAUpC,EACVqC,MAAO,CAAEC,QAASlC,EAAc,OAAS,SACzCmC,QAAS,kBAAM5B,EAAUT,GAAQ,IAJnC,UAME,gBAAKsB,UAAU,QAAf","sources":["components/ComicsList/ComicsList.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Spinner } from \"../ui/Spinner/Spinner\";\r\nimport { ErrorMessage } from \"../ErrorMessage/ErrorMessage\";\r\nimport { useMarvelService } from \"../../services/useMarvelService\";\r\n\r\nimport \"./comicsList.scss\";\r\n\r\nconst ComicsList = () => {\r\n  const [comicsList, setComicsList] = useState([] as any);\r\n  const [newItemLoading, setNewItemLoading] = useState(false);\r\n  const [offset, setOffset] = useState(0);\r\n  const [comicsEnded, setComicsEnded] = useState(false);\r\n\r\n  const { loading, error, getAllComics } = useMarvelService();\r\n\r\n  useEffect(() => {\r\n    onRequest(offset, true);\r\n  }, []);\r\n\r\n  const onRequest = (offset, initial) => {\r\n    initial ? setNewItemLoading(false) : setNewItemLoading(true);\r\n    getAllComics(offset).then(onComicsListLoaded);\r\n  };\r\n\r\n  const onComicsListLoaded = (newComicsList) => {\r\n    let ended = false;\r\n    if (newComicsList.length < 8) {\r\n      ended = true;\r\n    }\r\n\r\n    setComicsList((comicsList) => [...comicsList, ...newComicsList]);\r\n    setNewItemLoading(false);\r\n    setOffset((offset) => offset + 8);\r\n    setComicsEnded((comicsEnded) => ended);\r\n  };\r\n\r\n  function renderItems(arr) {\r\n    const items = arr.map((item, i) => {\r\n      return (\r\n        <li tabIndex={0} className=\"comics__item\" key={i}>\r\n          <Link to={`/comics/${item.id}`}>\r\n            <img\r\n              src={item.thumbnail}\r\n              alt={item.title}\r\n              className=\"comics__item-img\"\r\n            />\r\n            <div className=\"comics__item-name\">{item.title}</div>\r\n          </Link>\r\n        </li>\r\n      );\r\n    });\r\n\r\n    return <ul className=\"comics__grid\">{items}</ul>;\r\n  }\r\n\r\n  const items = renderItems(comicsList);\r\n  const errorMessage = error ? <ErrorMessage /> : null;\r\n  const spinner = loading && !newItemLoading ? <Spinner /> : null;\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"comics__list\">\r\n        {errorMessage}\r\n        {spinner}\r\n        {items}\r\n        <button\r\n          className=\"button button__main button__long\"\r\n          disabled={newItemLoading}\r\n          style={{ display: comicsEnded ? \"none\" : \"block\" }}\r\n          onClick={() => onRequest(offset, false)}\r\n        >\r\n          <div className=\"inner\">load more</div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ComicsList;"],"names":["useState","comicsList","setComicsList","newItemLoading","setNewItemLoading","offset","setOffset","comicsEnded","setComicsEnded","useMarvelService","loading","error","getAllComics","useEffect","onRequest","initial","then","onComicsListLoaded","newComicsList","ended","length","items","arr","map","item","i","tabIndex","className","to","id","src","thumbnail","alt","title","renderItems","errorMessage","ErrorMessage","spinner","Spinner","disabled","style","display","onClick"],"sourceRoot":""}